<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TIMBX - Your Comprehensive Timber Management Platform</title>
  <script src="https://cdn.tailwindcss.com"></script>
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet-control-geocoder/1.13.0/Control.Geocoder.css" />
  
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <header class="bg-green-700 text-white p-4 text-center shadow-lg">
    <h1 class="text-4xl font-extrabold tracking-wide">TIMBX</h1>
    <p class="mt-2 text-lg">Your Comprehensive Timber Management Platform</p>
    <p class="text-sm italic mt-1">Connecting landowners, foresters, buyers, and contractors for transparent and efficient timber management.</p>
  </header>

  <nav class="bg-green-800 p-2 shadow-md">
    <div class="container mx-auto flex flex-wrap justify-center space-x-4">
      <a href="#home" data-nav-target="home" class="text-white hover:bg-green-600 px-3 py-2 rounded-md font-bold transition duration-200">Home</a>
      <a href="#marketplace" data-nav-target="marketplace" class="text-white hover:bg-green-600 px-3 py-2 rounded-md font-bold transition duration-200">Marketplace</a>
      <a href="#properties" data-nav-target="properties" class="text-white hover:bg-green-600 px-3 py-2 rounded-md font-bold transition duration-200">My Properties</a>
      <a href="#hunting-leases" data-nav-target="hunting-leases" class="text-white hover:bg-green-600 px-3 py-2 rounded-md font-bold transition duration-200">Hunting Leases</a>
      <a href="#my-projects" data-nav-target="my-projects" class="text-white hover:bg-green-600 px-3 py-2 rounded-md font-bold transition duration-200">My Projects</a>
      <a href="#my-profile" data-nav-target="my-profile" class="text-white hover:bg-green-600 px-3 py-2 rounded-md font-bold transition duration-200">My Profile</a>
      <a href="#my-messages" data-nav-target="my-messages" class="text-white hover:bg-green-600 px-3 py-2 rounded-md font-bold transition duration-200">My Messages</a>
      <button id="login-button" class="bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-md font-bold transition duration-200">Login</button>
      <button id="signup-button" class="bg-yellow-500 hover:bg-yellow-400 text-gray-900 px-4 py-2 rounded-md font-bold transition duration-200">Sign Up</button>
      <button id="logout-button" class="bg-red-500 hover:bg-red-400 text-white px-4 py-2 rounded-md font-bold transition duration-200 hidden">Logout</button>
    </div>
  </nav>

  <main class="container mx-auto p-4">
    <section id="home" class="p-6 bg-white rounded-lg shadow-md mb-6">
      <h2 class="text-3xl font-semibold text-green-700 mb-4">Welcome to TIMBX</h2>
      <p class="text-gray-700 leading-relaxed">
        TIMBX is revolutionizing the timber industry by bringing transparency, efficiency, and direct connections to landowners, foresters, timber buyers, and contractors. We empower you with the tools and information needed to manage your forest assets, find the best market prices, and connect with trusted professionals across the region.
      </p>
      <div class="mt-8 border-t pt-6">
        <h3 class="text-2xl font-semibold text-green-700 mb-4">Quick Demo Access</h3>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4">
          <button data-demo-role="seller" class="bg-emerald-500 hover:bg-emerald-600 text-white px-4 py-2 rounded-md font-bold transition duration-200 shadow">Demo Seller</button>
          <button data-demo-role="buyer" class="bg-teal-500 hover:bg-teal-600 text-white px-4 py-2 rounded-md font-bold transition duration-200 shadow">Demo Buyer</button>
          <button data-demo-role="forester" class="bg-lime-500 hover:bg-lime-600 text-white px-4 py-2 rounded-md font-bold transition duration-200 shadow">Demo Forester</button>
          <button data-demo-role="contractor" class="bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded-md font-bold transition duration-200 shadow">Demo Contractor</button>
        </div>
      </div>
    </section>

    <section id="marketplace" class="hidden-section p-6 bg-white rounded-lg shadow-md mb-6">
      <h2 class="text-3xl font-semibold text-green-700 mb-4">Marketplace</h2>
      <div id="map-filters" class="flex flex-wrap items-center justify-center gap-4 mb-4 p-2 bg-gray-100 rounded-md">
          <label class="font-medium text-gray-700 flex items-center"><input type="checkbox" id="filter-properties" class="mr-1" checked><span class="legend-dot bg-blue-500"></span>Properties</label>
          <label class="font-medium text-gray-700 flex items-center"><input type="checkbox" id="filter-foresters" class="mr-1" checked><span class="legend-dot bg-green-500"></span>Foresters</label>
          <label class="font-medium text-gray-700 flex items-center"><input type="checkbox" id="filter-buyers" class="mr-1" checked><span class="legend-dot bg-red-500"></span>Buyers</label>
          <label class="font-medium text-gray-700 flex items-center"><input type="checkbox" id="filter-contractors" class="mr-1" checked><span class="legend-dot bg-yellow-500"></span>Contractors</label>
      </div>
      <div class="flex flex-col md:flex-row gap-4">
        <div id="marketplace-map-container" class="w-full md:w-2/3 relative">
          <div id="global-map"></div>
          <div class="map-search-icon" data-map-id="global-map"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z" clip-rule="evenodd" /></svg></div>
        </div>
        <div id="dynamic-map-list-container" class="w-full md:w-1/3 p-2 border border-gray-200 rounded-md bg-gray-50 h-auto md:h-[600px] overflow-y-auto">
            <h3 class="font-bold text-lg text-gray-800 mb-2 text-center">Showing items in map view</h3>
            <ul id="dynamic-map-list" class="space-y-3"></ul>
        </div>
      </div>
    </section>
    
    <section id="properties" class="hidden-section p-6 bg-white rounded-lg shadow-md mb-6">
      <h2 class="text-3xl font-semibold text-green-700 mb-4">My Properties</h2>
      <p id="properties-login-prompt" class="text-red-600 mb-4 hidden">Please log in as a Seller to manage your properties.</p>
      <div id="properties-main-content" class="hidden">
        <button id="btn-add-property" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition duration-200 mt-4 mb-4">Add New Property</button>
        <h3 class="text-2xl font-medium text-gray-800 mt-6 mb-4">Your Listed Properties</h3>
        <p id="no-properties-message" class="text-gray-500 hidden text-center mb-4">No properties added yet. Click "Add New Property" to get started!</p>
        <ul id="property-list" class="grid grid-cols-1 md:grid-cols-2 gap-4"></ul>
      </div>
    </section>

    <section id="my-profile" class="hidden-section p-6 bg-white rounded-lg shadow-md mb-6">
      <h2 class="text-3xl font-semibold text-green-700 mb-4">My Profile</h2>
      <p id="profile-login-prompt" class="text-red-600 mb-4 hidden">Please log in to view your profile.</p>
      <div id="profile-details" class="hidden">
        <div class="flex flex-col sm:flex-row items-center sm:items-start space-y-4 sm:space-y-0 sm:space-x-6 mb-6">
          <img id="profile-picture-display" src="" alt="Profile Picture" class="w-32 h-32 rounded-full object-cover border-4 border-green-200 shadow-md">
          <div class="text-center sm:text-left">
            <h3 id="profile-username" class="text-3xl font-bold text-gray-800"></h3>
            <p id="profile-company" class="text-lg text-gray-600"></p>
            <p class="text-lg font-semibold text-gray-800">Role: <span id="profile-role" class="font-normal text-gray-700"></span></p>
          </div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="md:col-span-2 space-y-4">
            <div>
              <h4 class="text-xl font-semibold text-green-700 border-b pb-2 mb-2">About Me</h4>
              <p id="profile-bio" class="text-gray-700 leading-relaxed"></p>
            </div>
            <div id="profile-role-specific-data"></div>
            <div>
              <h4 class="text-xl font-semibold text-green-700 border-b pb-2 mb-2">Statistics</h4>
              <div class="flex flex-wrap gap-4 text-center">
                <div class="bg-gray-100 p-3 rounded-lg flex-grow"><p class="text-2xl font-bold text-yellow-500" id="profile-rating"></p><p class="text-sm text-gray-600">Rating (<span id="profile-review-count"></span> reviews)</p></div>
                <div class="bg-gray-100 p-3 rounded-lg flex-grow"><p class="text-2xl font-bold text-green-600" id="profile-transactions"></p><p class="text-sm text-gray-600">Completed Transactions</p></div>
              </div>
            </div>
          </div>
          <div class="space-y-4">
            <div>
              <h4 class="text-xl font-semibold text-green-700 border-b pb-2 mb-2">Contact</h4>
              <p class="text-sm text-gray-700">Email: <span id="profile-email" class="font-normal text-gray-700"></span></p>
              <p class="text-sm text-gray-500">Member since: <span id="profile-member-since"></span></p>
            </div>
            <div id="profile-map-container" class="hidden">
              <h4 class="text-xl font-semibold text-green-700 border-b pb-2 mb-2">Service Area</h4>
              <div id="profile-map-display" class="w-full h-64 rounded-lg border relative">
                  <div class="map-search-icon" data-map-id="profile-map-display"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z" clip-rule="evenodd" /></svg></div>
              </div>
            </div>
          </div>
        </div>
        <button id="edit-my-profile-button" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md font-bold transition duration-200 mt-8">Edit Profile</button>
      </div>
    </section>
      
    <section id="hunting-leases" class="hidden-section p-6 bg-white rounded-lg shadow-md mb-6"><h2 class="text-3xl font-semibold text-green-700 mb-4">Hunting Leases</h2><p class="text-gray-500">This feature is coming soon!</p></section>
    <section id="my-projects" class="hidden-section p-6 bg-white rounded-lg shadow-md mb-6"><h2 class="text-3xl font-semibold text-green-700 mb-4">My Projects</h2><p class="text-gray-500">This feature is coming soon!</p></section>
    <section id="my-messages" class="hidden-section p-6 bg-white rounded-lg shadow-md mb-6"><h2 class="text-3xl font-semibold text-green-700 mb-4">My Messages</h2><p class="text-gray-500">This feature is coming soon!</p></section>
  </main>

  <div id="modal-container">
    <div id="login-modal" class="modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="login-modal-title">
        <div class="modal-content">
          <span id="close-login-modal" class="close-button" aria-label="Close Login dialog">&times;</span>
          <h2 id="login-modal-title" class="text-2xl font-bold mb-4 text-green-700">Login to TIMBX</h2>
          <form id="login-form">
            <div id="login-message" class="text-red-500 mb-3 hidden" aria-live="polite"></div>
            <label for="login-email" class="block text-sm font-medium text-gray-700">Email</label>
            <input type="email" id="login-email" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm mb-3" required autocomplete="username">
            <label for="login-password" class="block text-sm font-medium text-gray-700">Password</label>
            <input type="password" id="login-password" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm mb-4" required autocomplete="current-password">
            <button type="submit" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md w-full transition duration-200">Login</button>
          </form>
          <p class="text-center text-sm text-gray-600 mt-4">Don't have an account? <a href="#" id="show-signup-from-login-link" class="text-blue-600 hover:underline">Sign Up</a></p>
        </div>
    </div>
    
    <div id="signup-modal" class="modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="signup-modal-title">
        <div class="modal-content">
          <span id="close-signup-modal" class="close-button" aria-label="Close Sign Up dialog">&times;</span>
          <h2 id="signup-modal-title" class="text-2xl font-bold mb-4 text-green-700">Join TIMBX</h2>
          <form id="signup-form">
            <div id="signup-message" class="text-red-500 mb-3 hidden" aria-live="polite"></div>
            <label for="signup-username" class="block text-sm font-medium text-gray-700">Choose a Username</label>
            <input type="text" id="signup-username" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm mb-3" required>
            <label for="signup-email" class="block text-sm font-medium text-gray-700">Email</label>
            <input type="email" id="signup-email" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm mb-3" required autocomplete="email">
            <label for="signup-password" class="block text-sm font-medium text-gray-700">Password</label>
            <input type="password" id="signup-password" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm mb-3" required autocomplete="new-password">
            <label for="signup-role" class="block text-sm font-medium text-gray-700">I am a:</label>
            <select id="signup-role" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm mb-4" required>
              <option value="">Select Role</option>
              <option value="seller">Landowner/Seller</option>
              <option value="buyer">Timber Buyer</option>
              <option value="forester">Forester</option>
              <option value="contractor">Contractor</option>
            </select>
    
            <div class="border-t pt-4 mt-4 space-y-3">
                <h3 class="text-lg font-semibold text-gray-800">Optional Profile Details</h3>
                <label for="signup-profile-picture-url" class="block text-sm font-medium text-gray-700">Profile Picture URL</label>
                <input type="url" id="signup-profile-picture-url" placeholder="https://example.com/mypicture.jpg" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm">
                <label for="signup-company" class="block text-sm font-medium text-gray-700">Company Name</label>
                <input type="text" id="signup-company" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm">
                <label for="signup-bio" class="block text-sm font-medium text-gray-700">Short Bio</label>
                <textarea id="signup-bio" rows="3" placeholder="Tell us about yourself or your company..." class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm"></textarea>
            </div>
    
            <div id="forester-fields" class="hidden border-t pt-4 mt-4">
              <p class="text-sm text-gray-600 mb-2 mt-4 font-semibold">Click map to set public location:</p>
              <div id="forester-signup-map" class="mb-4 relative"><div class="map-search-icon" data-map-id="forester-signup-map"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z" clip-rule="evenodd" /></svg></div></div>
            </div>
            <div id="buyer-fields" class="hidden border-t pt-4 mt-4">
               <p class="text-sm text-gray-600 mb-2 mt-4 font-semibold">Click map to set public location:</p>
              <div id="buyer-signup-map" class="mb-4 relative"><div class="map-search-icon" data-map-id="buyer-signup-map"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z" clip-rule="evenodd" /></svg></div></div>
            </div>
            <div id="contractor-fields" class="hidden border-t pt-4 mt-4">
               <p class="text-sm text-gray-600 mb-2 mt-4 font-semibold">Click map to set public location:</p>
              <div id="contractor-signup-map" class="mb-4 relative"><div class="map-search-icon" data-map-id="contractor-signup-map"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z" clip-rule="evenodd" /></svg></div></div>
            </div>
    
            <button type="submit" class="bg-yellow-500 hover:bg-yellow-600 text-gray-900 px-4 py-2 rounded-md w-full transition duration-200 mt-4">Sign Up</button>
          </form>
          <p class="text-center text-sm text-gray-600 mt-4">Already have an account? <a href="#" id="show-login-from-signup-link" class="text-blue-600 hover:underline">Login</a></p>
        </div>
    </div>

    <div id="edit-profile-modal" class="full-page-section hidden" role="dialog" aria-modal="true" aria-labelledby="edit-profile-modal-title">
        <div class="modal-content">
          <span id="close-edit-profile-modal" class="close-button" aria-label="Close Edit Profile dialog">&times;</span>
          <h2 id="edit-profile-modal-title" class="text-2xl font-bold mb-4 text-green-700">Edit Your Profile</h2>
          <form id="edit-profile-form">
            <div id="edit-profile-message" class="text-red-500 mb-3 hidden" aria-live="polite"></div>
            <h3 class="text-lg font-semibold text-gray-800 border-b pb-2 mb-3">General Information</h3>
            <div class="space-y-3">
              <label for="edit-username" class="block text-sm font-medium text-gray-700">Username</label>
              <input type="text" id="edit-username" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm" required>
              <label for="edit-profile-picture-url" class="block text-sm font-medium text-gray-700">Profile Picture URL</label>
              <input type="url" id="edit-profile-picture-url" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm">
              <label for="edit-company" class="block text-sm font-medium text-gray-700">Company Name</label>
              <input type="text" id="edit-company" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm">
              <label for="edit-bio" class="block text-sm font-medium text-gray-700">Short Bio</label>
              <textarea id="edit-bio" rows="3" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm"></textarea>
            </div>
            
            <div id="edit-forester-fields" class="hidden space-y-3 mt-4">
              <h3 class="text-lg font-semibold mt-4 text-gray-800 border-t pt-3">Forester Details</h3>
              <label for="edit-forester-experience" class="block text-sm font-medium text-gray-700">Years of Experience</label>
              <input type="number" id="edit-forester-experience" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm">
              <label class="block text-sm font-medium text-gray-700">Specialties (check all that apply)</label>
              <div id="edit-forester-specialties" class="grid grid-cols-2 gap-2 text-sm">
                  <label class="flex items-center"><input type="checkbox" value="Timber Cruising" class="mr-2">Timber Cruising</label>
                  <label class="flex items-center"><input type="checkbox" value="Appraisal" class="mr-2">Appraisal</label>
                  <label class="flex items-center"><input type="checkbox" value="Reforestation" class="mr-2">Reforestation</label>
                  <label class="flex items-center"><input type="checkbox" value="Management Plans" class="mr-2">Management Plans</label>
                  <label class="flex items-center"><input type="checkbox" value="Prescribed Burning" class="mr-2">Prescribed Burning</label>
              </div>
            </div>
            <div id="edit-contractor-fields" class="hidden space-y-3 mt-4">
              <h3 class="text-lg font-semibold mt-4 text-gray-800 border-t pt-3">Contractor Details</h3>
              <label class="block text-sm font-medium text-gray-700">Services Offered (check all that apply)</label>
              <div id="edit-contractor-services" class="grid grid-cols-2 gap-2 text-sm">
                  <label class="flex items-center"><input type="checkbox" value="Logging" class="mr-2">Logging</label>
                  <label class="flex items-center"><input type="checkbox" value="Planting" class="mr-2">Planting</label>
                  <label class="flex items-center"><input type="checkbox" value="Site Prep" class="mr-2">Site Prep</label>
                  <label class="flex items-center"><input type="checkbox" value="Firelane Clearing" class="mr-2">Firelane Clearing</label>
                  <label class="flex items-center"><input type="checkbox" value="Hauling" class="mr-2">Hauling</label>
              </div>
            </div>

            <div id="edit-profile-map-container" class="hidden mt-4">
              <h3 class="text-lg font-semibold mt-4 text-gray-800 border-t pt-3">Update Your Location & Service Area</h3>
              <div class="my-4">
                  <label for="service-radius-slider" class="block text-sm font-medium text-gray-700">Service Radius: <span id="service-radius-value" class="font-bold">50</span> miles</label>
                  <input type="range" id="service-radius-slider" min="5" max="250" value="50" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
              </div>
              <div id="edit-profile-map" class="mb-4 relative"><div class="map-search-icon" data-map-id="edit-profile-map"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z" clip-rule="evenodd" /></svg></div></div>
            </div>

            <div class="mt-6 flex justify-end space-x-3">
              <button type="button" id="cancel-edit-profile-button" class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-md font-bold transition">Cancel</button>
              <button type="submit" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md font-bold transition">Save Changes</button>
            </div>
          </form>
        </div>
    </div>

    <div id="property-form-modal" class="full-page-section hidden">
        <div class="modal-content">
          <span id="close-property-form-modal" class="close-button" >&times;</span>
          <h2 id="property-form-title" class="text-2xl font-bold mb-4 text-green-700">Property Details</h2>
          <form id="property-form">
            <input type="hidden" id="property-id">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6">
              <div>
                <h3 class="text-lg font-semibold text-gray-800 border-b pb-2 mb-3">Basic Information</h3>
                <div class="space-y-3">
                  <label for="property-name" class="block text-sm font-medium text-gray-700">Property Name</label>
                  <input type="text" id="property-name" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm" required>
                  <label for="property-service-type" class="block text-sm font-medium text-gray-700">Service Offering</label>
                  <select id="property-service-type" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm" required><option value="">Select Service Type</option><option value="Timber Harvest">Timber Harvest</option><option value="Forester Recommendation">Forester Recommendation</option><option value="Reforestation">Reforestation</option><option value="Firelane Construction">Firelane Construction</option></select>
                </div>
                <h3 class="text-lg font-semibold text-gray-800 border-b pb-2 mb-3 mt-6">Timber Profile</h3>
                <div class="space-y-3">
                  <label for="property-timber-type" class="block text-sm font-medium text-gray-700">Dominant Timber Type</label>
                  <select id="property-timber-type" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm"><option value="">Select</option><option value="Pine">Pine</option><option value="Hardwood">Hardwood</option><option value="Mixed">Mixed</option><option value="Cypress">Cypress</option></select>
                  <label for="property-species" class="block text-sm font-medium text-gray-700">Dominant Species</label>
                  <input type="text" id="property-species" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm">
                  <label for="property-age" class="block text-sm font-medium text-gray-700">Approx. Age of Stand (years)</label>
                  <input type="number" id="property-age" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm" min="0">
                  <label for="property-stand-quality" class="block text-sm font-medium text-gray-700">Stand Quality</label>
                  <select id="property-stand-quality" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm"><option value="">Select</option><option value="Excellent">Excellent</option><option value="Good">Good</option><option value="Fair">Fair</option><option value="Poor">Poor</option></select>
                </div>
              </div>
              <div>
                <h3 class="text-lg font-semibold text-gray-800 border-b pb-2 mb-3">Land & History</h3>
                <div class="space-y-3">
                  <label for="property-topography" class="block text-sm font-medium text-gray-700">Topography</label>
                  <select id="property-topography" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm"><option value="">Select</option><option value="Flat">Flat (0-5% slope)</option><option value="Rolling">Rolling (6-15% slope)</option><option value="Hilly">Hilly (16-30% slope)</option><option value="Steep">Steep (>30% slope)</option></select>
                  <label for="property-accessibility" class="block text-sm font-medium text-gray-700">Site Accessibility</label>
                  <select id="property-accessibility" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm"><option value="">Select</option><option value="Excellent">Excellent (Paved road)</option><option value="Good">Good (Gravel road)</option><option value="Fair">Fair (Dirt road, 4WD may be needed)</option><option value="Poor">Poor (Limited access)</option></select>
                  <label for="property-previous-cut-year" class="block text-sm font-medium text-gray-700">Previous Cutting Year (Optional)</label>
                  <input type="number" id="property-previous-cut-year" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm" min="1900" max="2100">
                  <label for="property-previous-cut-type" class="block text-sm font-medium text-gray-700">Previous Cutting Type (Optional)</label>
                  <select id="property-previous-cut-type" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm"><option value="">Select</option><option value="Clear-cut">Clear-cut</option><option value="Marked Thinning">Marked Thinning</option><option value="Operator Select">Operator Select</option></select>
                </div>
                <h3 class="text-lg font-semibold text-gray-800 border-b pb-2 mb-3 mt-6">Additional Details</h3>
                <textarea id="property-desc" rows="5" placeholder="Provide other relevant details..." class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm"></textarea>
              </div>
            </div>
            <div class="mt-6 border-t pt-4">
                <h3 class="text-lg font-semibold text-gray-800 border-b pb-2 mb-3">Property Boundary</h3>
                <div id="property-map" class="mb-2 relative">
                    <div class="map-search-icon" data-map-id="property-map"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z" clip-rule="evenodd" /></svg></div>
                </div>
                <div class="text-center font-bold text-lg text-green-700 mb-4">Calculated Acreage: <span id="calculated-acreage">0.00</span> acres</div>
            </div>
            <div class="mt-6 flex justify-end space-x-3">
              <button type="button" id="btn-cancel-property" class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-md font-bold transition">Cancel</button>
              <button type="submit" id="btn-save-property" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md font-bold transition">Save Property</button>
            </div>
          </form>
        </div>
    </div>
    <div id="map-search-modal" class="modal-overlay hidden">
        <div class="map-search-content">
            <span id="close-map-search-modal" class="close-button">&times;</span>
            <div id="geocoder-container"></div>
        </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>
  <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-geometryutil/0.10.2/leaflet.geometryutil.min.js"></script>
  <script type="module" src="js/main.js"></script>
</body>
</html>